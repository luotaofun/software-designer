1
00:00:00,000 --> 00:00:02,029
再来看下一个例题

2
00:00:02,029 --> 00:00:05,380
那么同样呢，在这个题目当中啊

3
00:00:05,380 --> 00:00:09,150
会给我们一大段的需求描述

4
00:00:09,150 --> 00:00:12,160
唉，也就是呢，需求分析的结果

5
00:00:12,160 --> 00:00:13,790
根据这个结果呀

6
00:00:13,790 --> 00:00:15,590
会有一个呢，概念模型

7
00:00:15,590 --> 00:00:18,090
它的设计结果，也就是 ER 图

8
00:00:18,090 --> 00:00:21,050
在这里一二图是缺失的

9
00:00:21,050 --> 00:00:23,330
我们需要呢，补充一二图

10
00:00:23,330 --> 00:00:26,770
其次呢，有一个逻辑结构设计的结果

11
00:00:26,770 --> 00:00:28,850
也就是呢，关系模式

12
00:00:28,850 --> 00:00:33,210
那这个关系模式同样呢，是有缺失的

13
00:00:33,210 --> 00:00:36,470
需要呢，补充缺失的关系模式

14
00:00:36,470 --> 00:00:40,720
那对于一二图和关系模式的补充

15
00:00:40,720 --> 00:00:42,780
在我们这道题当中啊

16
00:00:42,780 --> 00:00:45,160
占据到的分值呢，只有九分

17
00:00:45,160 --> 00:00:49,530
那剩下的六分的分值相对来说呢

18
00:00:49,530 --> 00:00:52,440
占据的分值比例还是比较大的

19
00:00:52,440 --> 00:00:53,760
他告诉我们呢

20
00:00:53,760 --> 00:00:55,300
为了方便顾客

21
00:00:55,300 --> 00:00:58,180
现在呢，允许保存地址

22
00:00:58,180 --> 00:01:00,710
那客户在系统当中

23
00:01:00,710 --> 00:01:03,530
可以有对应的多组收货地址

24
00:01:03,530 --> 00:01:05,090
根据这个需求呢

25
00:01:05,090 --> 00:01:07,630
增加了一个弱实体

26
00:01:07,630 --> 00:01:10,720
那对于弱实体的画法

27
00:01:10,720 --> 00:01:15,890
它与顾客之间会以呢菱形连接起来

28
00:01:15,890 --> 00:01:18,460
这个菱形呀，是一个呢

29
00:01:18,460 --> 00:01:20,280
双边的菱形

30
00:01:20,280 --> 00:01:23,090
与之对应的弱实体呢

31
00:01:23,090 --> 00:01:27,820
也需要用双边的矩形把它们圈起来

32
00:01:27,820 --> 00:01:31,530
那这是呢，顾客就是顾客地址

33
00:01:31,530 --> 00:01:33,380
一个顾客可以呢

34
00:01:33,380 --> 00:01:35,160
有多组顾客地址

35
00:01:35,160 --> 00:01:37,740
它们之间呢是一对多的联系

36
00:01:37,740 --> 00:01:40,490
那这是我们在图示当中啊

37
00:01:40,490 --> 00:01:43,660
需要对图二杠一进行了补充

38
00:01:43,660 --> 00:01:47,700
那我们呢，还需要修改运送关系模式

39
00:01:47,700 --> 00:01:48,870
我们可以呢

40
00:01:48,870 --> 00:01:53,190
根据题目中已经给出的运送关系模式

41
00:01:53,190 --> 00:01:54,840
简单的可以看到呢

42
00:01:54,840 --> 00:01:57,340
它有运送 id 、配送员

43
00:01:57,340 --> 00:02:01,610
还有相应的托运公司订单 id 、发货时间吧

44
00:02:01,610 --> 00:02:04,450
那么在这里还需要呢

45
00:02:04,450 --> 00:02:08,419
修改增加一个顾客地址

46
00:02:11,360 --> 00:02:14,080
每一次的运送要有呢

47
00:02:14,080 --> 00:02:16,920
相应的地址与之对应

48
00:02:16,920 --> 00:02:20,240
那如果说有同学呀

49
00:02:20,240 --> 00:02:22,840
喜欢用顾客地址编号的话

50
00:02:22,840 --> 00:02:27,560
你需要说明我们有一个顾客地址的关系模式

51
00:02:27,560 --> 00:02:31,900
里面包含地址编号和地址内容

52
00:02:31,900 --> 00:02:35,600
那与你自己啊，所回答的上下文呢

53
00:02:35,600 --> 00:02:37,530
要有对应关系

54
00:02:37,530 --> 00:02:40,520
那么这一题呢，有六分的分值

55
00:02:40,520 --> 00:02:42,820
已经呢，属于考察较多了

56
00:02:42,820 --> 00:02:46,340
那这道题呢，还涉及到了弱实体

57
00:02:46,340 --> 00:02:48,340
它的图示以及呢

58
00:02:48,340 --> 00:02:50,420
相关概念的引用

59
00:02:50,420 --> 00:02:53,110
那我们呢，详细来看一下

60
00:02:53,110 --> 00:02:57,990
根据题干说明来补充 ER 图和关系模式

61
00:02:57,990 --> 00:03:00,330
那在题干当中啊

62
00:03:00,330 --> 00:03:02,750
给我们的大部分内容呢

63
00:03:02,750 --> 00:03:05,240
在最开始的描述当中

64
00:03:05,240 --> 00:03:06,740
我们会发现

65
00:03:06,740 --> 00:03:09,640
它给出的内容都是呢

66
00:03:09,640 --> 00:03:12,660
与关系模式相关的信息

67
00:03:12,660 --> 00:03:15,950
关于员工信息、商品信息

68
00:03:15,950 --> 00:03:17,390
还有呢，诶

69
00:03:17,390 --> 00:03:20,440
顾客信息、托运公司信息

70
00:03:20,440 --> 00:03:23,090
从第五条需求开始

71
00:03:23,090 --> 00:03:26,630
才给出了我们联系相关的内容吧

72
00:03:26,630 --> 00:03:29,440
那我们根据联系的内容来看

73
00:03:29,440 --> 00:03:31,440
顾客登录之后呢

74
00:03:31,440 --> 00:03:34,660
可以下订单来购买商品

75
00:03:34,660 --> 00:03:37,380
那顾客购买商品

76
00:03:37,380 --> 00:03:42,420
他们之间的联系在图示当中已经给我们呢

77
00:03:42,420 --> 00:03:44,050
他呢会下订单

78
00:03:44,050 --> 00:03:48,060
那么订单是顾客与商品之间

79
00:03:48,060 --> 00:03:50,890
多对多联系的名称

80
00:03:50,890 --> 00:03:53,590
订单支付成功之后呢

81
00:03:53,590 --> 00:03:56,450
会记录一个唯一的支付编号

82
00:03:56,450 --> 00:03:58,170
在这里还需要呢

83
00:03:58,170 --> 00:04:01,040
指定它的运送方式

84
00:04:01,040 --> 00:04:06,000
下面代购员根据顾客的订单

85
00:04:06,000 --> 00:04:10,950
在超市当中来采购对应的商品

86
00:04:10,950 --> 00:04:13,860
一份订单的多个商品

87
00:04:13,860 --> 00:04:17,680
由多名代购从不同的超市来采购

88
00:04:17,680 --> 00:04:20,920
那这里其实告诉我们的是

89
00:04:20,920 --> 00:04:26,660
代购员根据订单在超市当中进行采购

90
00:04:26,660 --> 00:04:30,140
而这道题其实并没有给出超市

91
00:04:30,140 --> 00:04:32,230
并且对于超市来说

92
00:04:32,230 --> 00:04:34,410
在我们的关系模式当中啊

93
00:04:34,410 --> 00:04:37,910
并没有呢需要列出相应的属性

94
00:04:37,910 --> 00:04:40,390
所以不需要增加实体

95
00:04:40,390 --> 00:04:43,290
那么这里只是一个代购员

96
00:04:43,290 --> 00:04:46,970
与订单之间多对多的联系

97
00:04:47,230 --> 00:04:50,350
下面采购完的商品

98
00:04:50,350 --> 00:04:52,420
交由配送

99
00:04:52,420 --> 00:04:56,170
根据顾客订单来组合装箱

100
00:04:56,170 --> 00:04:59,480
那么采购完有相应的商品

101
00:04:59,480 --> 00:05:04,340
由配送员根据顾客订单来装箱

102
00:05:04,340 --> 00:05:07,860
然后交给托运公司来托运

103
00:05:07,860 --> 00:05:10,840
那这是一个断句的位置吧

104
00:05:10,840 --> 00:05:13,020
所以在这一句话当中

105
00:05:13,020 --> 00:05:14,680
我们有多个实体

106
00:05:14,680 --> 00:05:17,710
它们之间呢，是一个多元关系

107
00:05:17,710 --> 00:05:19,410
那我们会发现

108
00:05:19,410 --> 00:05:21,650
托运的过程当中

109
00:05:21,650 --> 00:05:25,970
是根据商品托运还是订单托运啊

110
00:05:25,970 --> 00:05:31,250
在这里是根据顾客订单组合装箱并托运的

111
00:05:31,250 --> 00:05:35,490
所以运送关系的一端是订单

112
00:05:35,490 --> 00:05:40,400
那订单这个联系作为另一个联系的一端

113
00:05:40,400 --> 00:05:43,880
这里呢，就是一个聚集关系

114
00:05:43,880 --> 00:05:47,570
其次，我们在托运的过程当中

115
00:05:47,570 --> 00:05:52,350
会由配送员交给相应的托运公司

116
00:05:52,350 --> 00:05:56,110
所以这里呢，还有配送员、托运公司

117
00:05:56,110 --> 00:05:59,940
他们之间啊，形成了一个三元联系

118
00:05:59,940 --> 00:06:03,680
但是这道题比较尴尬的是什么呢

119
00:06:03,680 --> 00:06:07,850
并没有给出相关的多重度描述

120
00:06:07,850 --> 00:06:10,120
所以啊，在填写的时候

121
00:06:10,120 --> 00:06:14,140
我们只能呢，根据一些经验来进行填写了啊

122
00:06:14,140 --> 00:06:17,400
那配送员他的配送啊

123
00:06:17,400 --> 00:06:19,620
会不会只负责一个订单啊

124
00:06:19,620 --> 00:06:20,880
基本上不会

125
00:06:20,880 --> 00:06:24,150
一个配送员会负责多个订单

126
00:06:24,150 --> 00:06:26,490
那我们的订单

127
00:06:26,490 --> 00:06:29,860
正常来讲是由几个配送员来配送

128
00:06:29,860 --> 00:06:32,180
由几个配送公司来配送呢

129
00:06:32,180 --> 00:06:34,620
正常来讲由一个配送员

130
00:06:34,620 --> 00:06:38,760
然后呢由一个配送公司来进行配送

131
00:06:38,760 --> 00:06:41,260
那我们在这个过程当中

132
00:06:41,260 --> 00:06:44,110
又涉及到一个配送员

133
00:06:44,110 --> 00:06:48,710
他在运送过程当中只负责一个运送公司吗

134
00:06:48,710 --> 00:06:51,610
唉，在整个配送来看的话

135
00:06:51,610 --> 00:06:55,280
这个体系当中是没有分托运公司的

136
00:06:55,280 --> 00:07:00,380
所以配送员可以与多个托运公司对应

137
00:07:00,380 --> 00:07:01,750
那这个地方呢

138
00:07:01,750 --> 00:07:03,710
有一侧是多

139
00:07:03,710 --> 00:07:07,430
所以托运公司端是多

140
00:07:07,810 --> 00:07:11,910
其次再来看配送员为核心的话

141
00:07:11,910 --> 00:07:16,020
一个托运公司会由一个配送员来配送吗

142
00:07:16,020 --> 00:07:17,390
基本上不会吧

143
00:07:17,390 --> 00:07:19,550
也是多个配送员

144
00:07:19,550 --> 00:07:23,410
那这个情况下有一侧为多的情况

145
00:07:23,410 --> 00:07:26,130
那这个多重度呢，也是多

146
00:07:26,130 --> 00:07:30,440
它们之间的三元联系是多对多对多

147
00:07:30,440 --> 00:07:33,800
那这个联系啊，加起来呢，三分

148
00:07:33,800 --> 00:07:36,420
每一侧呢得分都是呢一分

149
00:07:36,420 --> 00:07:39,550
那这是关于联系的补充

150
00:07:39,550 --> 00:07:41,940
在关系模式当中啊

151
00:07:41,940 --> 00:07:46,500
我们首先看到缺失的第一个填空在订单

152
00:07:46,500 --> 00:07:49,350
那么订单我们在前面讲到

153
00:07:49,350 --> 00:07:52,410
订单是顾客与商品之间

154
00:07:52,410 --> 00:07:54,460
多对多的联系名称吧

155
00:07:54,460 --> 00:07:56,830
那么多对多的联系应该呢

156
00:07:56,830 --> 00:07:59,340
会规并二者的主见

157
00:07:59,340 --> 00:08:00,590
二者的主见

158
00:08:00,590 --> 00:08:04,230
顾客的主见应该是呢，顾客的编号

159
00:08:04,230 --> 00:08:07,880
商品的主见应该是商品条码

160
00:08:07,880 --> 00:08:11,120
那么商品条码唯一标识

161
00:08:11,120 --> 00:08:13,720
每种商品顾客编号

162
00:08:13,720 --> 00:08:17,300
系统会生成唯一的顾客编号

163
00:08:17,300 --> 00:08:20,660
这种自动生成的唯一的编

164
00:08:20,660 --> 00:08:23,650
同样呢是逐渐的描述

165
00:08:23,650 --> 00:08:24,940
那也就是说

166
00:08:24,940 --> 00:08:29,530
A 所缺失的至少包含两端组件

167
00:08:29,530 --> 00:08:34,450
也就是商品条码和顾客编号

168
00:08:37,140 --> 00:08:40,020
噔噔咚

169
00:08:43,539 --> 00:08:46,120
其次，我们会发现呢

170
00:08:46,120 --> 00:08:49,550
在题干当中还没告诉我们

171
00:08:49,550 --> 00:08:52,660
在订单支付成功之后啊

172
00:08:52,660 --> 00:08:56,500
系统呢，会生成唯一的支付凭证编号

173
00:08:56,500 --> 00:08:59,550
而这个支付凭证偏好啊

174
00:08:59,550 --> 00:09:01,710
已经呢存在了

175
00:09:01,710 --> 00:09:06,260
但是这道题其实它在自身描述的时候

176
00:09:06,260 --> 00:09:08,620
是存在冲突的

177
00:09:08,620 --> 00:09:12,090
那我们说一般存在 id 的情况下

178
00:09:12,090 --> 00:09:15,270
订单 id 应该是可以作为主键的

179
00:09:15,270 --> 00:09:18,890
或者呢，唯一的支付凭证编

180
00:09:18,890 --> 00:09:21,580
应该呢，是可以作为主键的

181
00:09:21,580 --> 00:09:23,490
但是在这里啊

182
00:09:23,490 --> 00:09:29,010
我们会发现后面用到的代购关系当中

183
00:09:29,010 --> 00:09:32,830
代购员他在代购过程当中啊

184
00:09:32,830 --> 00:09:38,410
它是根据顾客订单来采购对应商品的

185
00:09:38,410 --> 00:09:42,910
那这个订单当中包含的多个商品

186
00:09:42,910 --> 00:09:44,890
与代购员之间呢

187
00:09:44,890 --> 00:09:46,600
有多对多的联系

188
00:09:46,600 --> 00:09:47,880
也就是说

189
00:09:47,880 --> 00:09:50,610
当订单确定的时候

190
00:09:50,610 --> 00:09:54,310
由谁来代购其实是不一定的

191
00:09:54,310 --> 00:09:58,950
我们是根据订单和商品编号

192
00:09:58,950 --> 00:10:04,300
二者的组合键才能唯一确定一条元组

193
00:10:04,300 --> 00:10:06,570
所以在这里啊

194
00:10:06,570 --> 00:10:07,900
我们会发现

195
00:10:07,900 --> 00:10:12,360
订单当中是不能用我们的订单 id 

196
00:10:12,360 --> 00:10:14,300
来作为组件的

197
00:10:14,300 --> 00:10:15,040
为什么

198
00:10:15,040 --> 00:10:19,180
因为商品条码在这里可能呢

199
00:10:19,180 --> 00:10:21,740
会存在一些区别

200
00:10:21,740 --> 00:10:22,970
比如说呢

201
00:10:22,970 --> 00:10:27,220
唉，我们对于一个订单号 D 01

202
00:10:27,220 --> 00:10:29,590
那么这个订单当中啊

203
00:10:29,590 --> 00:10:34,240
由顾客零一购买了商品零一

204
00:10:34,240 --> 00:10:39,940
那么订单当中顾客零一又买了商品零二

205
00:10:39,940 --> 00:10:42,710
在订单零二当中

206
00:10:42,710 --> 00:10:46,630
顾客零二也买了商品零一

207
00:10:46,630 --> 00:10:48,700
那么我们会发现诶

208
00:10:48,700 --> 00:10:53,340
对应的订单编号是可以重复记录的吧

209
00:10:53,340 --> 00:10:55,650
否则这个商品编号

210
00:10:55,650 --> 00:10:58,310
是没有办法依次记录下来

211
00:10:58,310 --> 00:10:59,740
他所下的订单的

212
00:10:59,740 --> 00:11:02,480
所以这地方啊，本身逻辑上呢

213
00:11:02,480 --> 00:11:04,500
我们用订单编号在这里

214
00:11:04,500 --> 00:11:06,130
其实是做不了主见的

215
00:11:06,130 --> 00:11:08,020
有这样的一个特殊地方

216
00:11:08,020 --> 00:11:10,040
大家呢，留意一下就行了

217
00:11:10,040 --> 00:11:12,730
那这道题并没有问到主见

218
00:11:12,730 --> 00:11:15,400
我们对于代购关系呀

219
00:11:15,400 --> 00:11:17,560
这里的补充呢，要注意

220
00:11:17,560 --> 00:11:23,120
它所谓的代购过程并不是只针对订单

221
00:11:23,120 --> 00:11:28,310
它还需要针对订单内部的商品条码

222
00:11:28,310 --> 00:11:31,210
单纯从代购关系来看

223
00:11:31,210 --> 00:11:34,620
它是对多对多联系的归并吧

224
00:11:34,620 --> 00:11:37,320
所以需要添加两端主键

225
00:11:37,320 --> 00:11:40,000
一端呢是代购员的工号

226
00:11:40,000 --> 00:11:42,240
另一端按理来说呢

227
00:11:42,240 --> 00:11:44,000
应该是订单的主键

228
00:11:44,000 --> 00:11:46,400
那我们能不能写订单编号

229
00:11:46,400 --> 00:11:48,480
或者支付凭证编号啊

230
00:11:48,480 --> 00:11:49,660
并不行

231
00:11:49,660 --> 00:11:53,520
我们除了填写订单编号以外

232
00:11:53,520 --> 00:11:56,290
还需要哎，我们这里可以用呢

233
00:11:56,290 --> 00:11:58,090
订单 I

234
00:11:58,460 --> 00:12:04,220
以及增加相应的商品条码

235
00:12:05,120 --> 00:12:09,340
根据商品条码来进行代购

236
00:12:09,340 --> 00:12:12,100
那这里呢，要注意区别

237
00:12:12,100 --> 00:12:14,250
那订单 id 的话

238
00:12:14,250 --> 00:12:15,390
在这里啊

239
00:12:15,390 --> 00:12:19,660
其实把它换成支付凭证编号也可以呢

240
00:12:19,660 --> 00:12:22,150
具有一定的唯一性

241
00:12:22,150 --> 00:12:25,260
当然，在这里有订单 id 的时候

242
00:12:25,260 --> 00:12:29,620
应该呢，用订单 id 更符合业务逻辑一些

243
00:12:29,620 --> 00:12:32,450
更容易呢去理解一些

244
00:12:32,450 --> 00:12:36,920
那这是关系模式需要大家呢去做的补充

245
00:12:36,920 --> 00:12:39,240
综合来看，这道题的话

246
00:12:39,240 --> 00:12:43,000
首先第一空，补充缺失的联系

247
00:12:43,000 --> 00:12:45,550
缺了一个三元联系

248
00:12:45,550 --> 00:12:47,240
其次，第二空

249
00:12:47,240 --> 00:12:49,880
诶，对于关系模式的缺失

250
00:12:49,880 --> 00:12:51,120
注意呢，唉

251
00:12:51,120 --> 00:12:54,780
两端联系的规定是两端的主见

252
00:12:54,780 --> 00:12:57,020
那对于代购关系

253
00:12:57,020 --> 00:12:59,160
它规定订单的时候

254
00:12:59,160 --> 00:13:03,180
单纯用订单 id 是不能作为主键的

255
00:13:03,180 --> 00:13:06,000
还需要呢，加上商品条

256
00:13:06,000 --> 00:13:09,800
来识别每一次代购的过程

257
00:13:09,800 --> 00:13:12,350
因为代购是由代购员呢

258
00:13:12,350 --> 00:13:16,160
根据订单的商品来进行代购的

259
00:13:16,160 --> 00:13:18,050
那最后问题三

260
00:13:18,050 --> 00:13:20,770
新增一个弱实体

261
00:13:21,160 --> 00:13:23,920
它的新增过程当中

262
00:13:23,920 --> 00:13:30,320
弱实体它与我们的原实体之间存在的联系呢

263
00:13:30,320 --> 00:13:32,790
用双边的菱形来表示

264
00:13:32,790 --> 00:13:36,490
若实体呢，用双边的矩形来表示

265
00:13:36,490 --> 00:13:39,610
它们之间是一对多的联系

266
00:13:39,610 --> 00:13:42,610
其次呢，在托运的过程当中

267
00:13:42,610 --> 00:13:45,230
需要呢，根据地址来托运

268
00:13:45,230 --> 00:13:47,920
所以这里呢，地址与托运运之间

269
00:13:47,920 --> 00:13:49,140
运送之间啊

270
00:13:49,140 --> 00:13:52,440
也需要呢，加上一条联系的线

271
00:13:52,440 --> 00:13:55,560
那这个就是一个比较深入的扩展了

272
00:13:55,560 --> 00:13:57,520
对于这条线的补充啊

273
00:13:57,520 --> 00:13:58,600
对于大家来讲呢

274
00:13:58,600 --> 00:14:00,440
是没有做要求的

275
00:14:00,440 --> 00:14:04,460
毕竟我们考试当中是要求大家这类题型

276
00:14:04,460 --> 00:14:07,640
拿到12分左右的分值范围

277
00:14:07,640 --> 00:14:11,100
并没有要求大家呢，能够拿到满分

278
00:14:11,100 --> 00:14:12,120
15分啊

279
00:14:12,120 --> 00:14:13,330
大家要知道啊

280
00:14:13,330 --> 00:14:15,930
15分的分值要想拿12分

281
00:14:15,930 --> 00:14:18,490
我们呢，相对来说会容易一些

282
00:14:18,490 --> 00:14:21,940
但是剩下的三分我们可能要花呢

283
00:14:21,940 --> 00:14:24,360
诶，两倍的时间才能拿到

284
00:14:24,360 --> 00:14:25,860
那相对来说呢

285
00:14:25,860 --> 00:14:27,320
整个备考来说

286
00:14:27,320 --> 00:14:30,450
它并不是呢很划算的一种策略了

287
00:14:30,450 --> 00:14:33,640
那我们呢，在运送关系当中啊

288
00:14:33,640 --> 00:14:36,100
还要呢增加顾客地址

289
00:14:36,100 --> 00:14:40,500
那这个时候如果有同学写的是顾客地址编码

290
00:14:40,500 --> 00:14:45,230
一定要说明自己在顾客地址弱实体里面

291
00:14:45,230 --> 00:14:50,050
对它定义了顾客地址编码和顾客地址内容

292
00:14:50,050 --> 00:14:53,470
那这就是呢，我们给大家讲的诶

293
00:14:53,470 --> 00:14:56,690
数据库设计题的又一个案例
