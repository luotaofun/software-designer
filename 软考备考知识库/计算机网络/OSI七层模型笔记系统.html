<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSIä¸ƒå±‚æ¨¡å‹æ™ºèƒ½ç¬”è®°ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 20px;
            min-height: 100vh;
        }
        
        .main-content {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            overflow-y: auto;
        }
        
        .notes-panel {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            position: sticky;
            top: 20px;
            height: calc(100vh - 40px);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #333;
            font-size: 2.2em;
            margin-bottom: 10px;
        }
        
        .header p {
            color: #666;
            font-size: 1.1em;
        }
        
        .osi-layer {
            margin-bottom: 20px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .osi-layer:hover {
            border-color: #007bff;
            box-shadow: 0 5px 15px rgba(0,123,255,0.2);
        }
        
        .layer-header {
            padding: 15px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            color: white;
            position: relative;
        }
        
        .layer-7 .layer-header { background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%); }
        .layer-6 .layer-header { background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); }
        .layer-5 .layer-header { background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%); }
        .layer-4 .layer-header { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); }
        .layer-3 .layer-header { background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%); }
        .layer-2 .layer-header { background: linear-gradient(135deg, #81ecec 0%, #00b894 100%); }
        .layer-1 .layer-header { background: linear-gradient(135deg, #a29bfe 0%, #6c5ce7 100%); }
        
        .layer-content {
            padding: 20px;
            background: #f8f9fa;
            display: none;
        }
        
        .layer-content.active {
            display: block;
        }
        
        .layer-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .info-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        
        .info-card h4 {
            color: #007bff;
            margin-bottom: 8px;
            font-size: 0.9em;
        }
        
        .info-card p {
            font-weight: bold;
            color: #333;
        }
        
        .note-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }
        
        .note-button:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }
        
        .notes-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e9ecef;
        }
        
        .notes-header h2 {
            color: #333;
            font-size: 1.5em;
        }
        
        .notes-controls {
            display: flex;
            gap: 10px;
        }
        
        .control-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8em;
            transition: all 0.3s ease;
        }
        
        .save-btn {
            background: #28a745;
            color: white;
        }
        
        .export-btn {
            background: #17a2b8;
            color: white;
        }
        
        .clear-btn {
            background: #dc3545;
            color: white;
        }
        
        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .notes-area {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .note-tabs {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .note-tab {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }
        
        .note-tab.active {
            border-bottom-color: #007bff;
            color: #007bff;
            font-weight: bold;
        }
        
        .note-tab:hover {
            background: #f8f9fa;
        }
        
        .note-content {
            flex: 1;
            display: none;
        }
        
        .note-content.active {
            display: flex;
            flex-direction: column;
        }
        
        .note-editor {
            flex: 1;
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 15px;
            font-family: inherit;
            font-size: 14px;
            line-height: 1.5;
            resize: none;
            outline: none;
            transition: border-color 0.3s ease;
        }
        
        .note-editor:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0,123,255,0.1);
        }
        
        .note-stats {
            margin-top: 10px;
            font-size: 0.8em;
            color: #666;
            display: flex;
            justify-content: space-between;
        }
        
        .quick-notes {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 15px;
        }
        
        .quick-notes h4 {
            color: #856404;
            margin-bottom: 8px;
            font-size: 0.9em;
        }
        
        .quick-note-item {
            background: white;
            padding: 8px;
            margin: 5px 0;
            border-radius: 4px;
            font-size: 0.8em;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .quick-note-item:hover {
            background: #f8f9fa;
            transform: translateX(5px);
        }
        
        .charts-section {
            margin: 30px 0;
        }
        
        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .chart-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        
        .chart-card img {
            max-width: 100%;
            height: auto;
            border-radius: 6px;
        }
        
        .chart-card h3 {
            margin-bottom: 10px;
            color: #333;
            font-size: 1.1em;
        }
        
        .chart-card p {
            font-size: 0.9em;
            color: #666;
            margin-top: 10px;
        }
        
        @media (max-width: 1024px) {
            .container {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .notes-panel {
                position: static;
                height: auto;
                order: -1;
            }
        }
        
        .floating-tools {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
        }
        
        .tool-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            color: white;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .tool-btn:hover {
            transform: scale(1.1);
        }
        
        .bookmark-btn { background: #ffc107; }
        .highlight-btn { background: #fd7e14; }
        .search-btn { background: #6f42c1; }
    </style>
</head>
<body>
    <div class="floating-tools">
        <button class="tool-btn bookmark-btn" onclick="addBookmark()" title="æ·»åŠ ä¹¦ç­¾">ğŸ“Œ</button>
        <button class="tool-btn highlight-btn" onclick="highlightText()" title="é«˜äº®æ–‡æœ¬">ğŸ–ï¸</button>
        <button class="tool-btn search-btn" onclick="searchNotes()" title="æœç´¢ç¬”è®°">ğŸ”</button>
    </div>

    <div class="container">
        <div class="main-content">
            <div class="header">
                <h1>ğŸ“š OSIä¸ƒå±‚æ¨¡å‹æ™ºèƒ½ç¬”è®°ç³»ç»Ÿ</h1>
                <p>è¾¹å­¦è¾¹è®°ï¼Œæ„å»ºä½ çš„ç½‘ç»œçŸ¥è¯†ä½“ç³»</p>
            </div>

            <div class="osi-layer layer-7">
                <div class="layer-header" onclick="toggleLayer(7)">
                    <span>ğŸ–¥ï¸ ç¬¬7å±‚ï¼šåº”ç”¨å±‚ (Application Layer)</span>
                    <span>â–¼</span>
                </div>
                <div class="layer-content" id="layer-7-content">
                    <div class="layer-info">
                        <div class="info-card">
                            <h4>ä¼ è¾“å•ä½</h4>
                            <p>æ•°æ® (Data)</p>
                        </div>
                        <div class="info-card">
                            <h4>ä¸»è¦åŠŸèƒ½</h4>
                            <p>ç”¨æˆ·æ¥å£ã€ç½‘ç»œæœåŠ¡</p>
                        </div>
                        <div class="info-card">
                            <h4>åè®®ç¤ºä¾‹</h4>
                            <p>HTTP, FTP, SMTP, DNS</p>
                        </div>
                        <div class="info-card">
                            <h4>è€ƒè¯•é‡ç‚¹</h4>
                            <p>åè®®åŠŸèƒ½ã€ç«¯å£å·</p>
                        </div>
                    </div>
                    <button class="note-button" onclick="addLayerNote(7, 'åº”ç”¨å±‚')">ğŸ“ æ·»åŠ ç¬”è®°</button>
                </div>
            </div>

            <div class="osi-layer layer-6">
                <div class="layer-header" onclick="toggleLayer(6)">
                    <span>ğŸ”„ ç¬¬6å±‚ï¼šè¡¨ç¤ºå±‚ (Presentation Layer)</span>
                    <span>â–¼</span>
                </div>
                <div class="layer-content" id="layer-6-content">
                    <div class="layer-info">
                        <div class="info-card">
                            <h4>ä¼ è¾“å•ä½</h4>
                            <p>æ•°æ® (Data)</p>
                        </div>
                        <div class="info-card">
                            <h4>ä¸»è¦åŠŸèƒ½</h4>
                            <p>æ ¼å¼è½¬æ¢ã€åŠ å¯†å‹ç¼©</p>
                        </div>
                        <div class="info-card">
                            <h4>åè®®ç¤ºä¾‹</h4>
                            <p>SSL/TLS, JPEG, MPEG</p>
                        </div>
                        <div class="info-card">
                            <h4>è€ƒè¯•é‡ç‚¹</h4>
                            <p>æ•°æ®æ ¼å¼ã€åŠ å¯†æ–¹å¼</p>
                        </div>
                    </div>
                    <button class="note-button" onclick="addLayerNote(6, 'è¡¨ç¤ºå±‚')">ğŸ“ æ·»åŠ ç¬”è®°</button>
                </div>
            </div>

            <div class="osi-layer layer-5">
                <div class="layer-header" onclick="toggleLayer(5)">
                    <span>ğŸ”— ç¬¬5å±‚ï¼šä¼šè¯å±‚ (Session Layer)</span>
                    <span>â–¼</span>
                </div>
                <div class="layer-content" id="layer-5-content">
                    <div class="layer-info">
                        <div class="info-card">
                            <h4>ä¼ è¾“å•ä½</h4>
                            <p>æ•°æ® (Data)</p>
                        </div>
                        <div class="info-card">
                            <h4>ä¸»è¦åŠŸèƒ½</h4>
                            <p>ä¼šè¯ç®¡ç†ã€åŒæ­¥æ§åˆ¶</p>
                        </div>
                        <div class="info-card">
                            <h4>åè®®ç¤ºä¾‹</h4>
                            <p>NetBIOS, RPC, SQL</p>
                        </div>
                        <div class="info-card">
                            <h4>è€ƒè¯•é‡ç‚¹</h4>
                            <p>ä¼šè¯å»ºç«‹ã€ç»ˆæ­¢è¿‡ç¨‹</p>
                        </div>
                    </div>
                    <button class="note-button" onclick="addLayerNote(5, 'ä¼šè¯å±‚')">ğŸ“ æ·»åŠ ç¬”è®°</button>
                </div>
            </div>

            <div class="osi-layer layer-4">
                <div class="layer-header" onclick="toggleLayer(4)">
                    <span>ğŸ“¦ ç¬¬4å±‚ï¼šä¼ è¾“å±‚ (Transport Layer)</span>
                    <span>â–¼</span>
                </div>
                <div class="layer-content" id="layer-4-content">
                    <div class="layer-info">
                        <div class="info-card">
                            <h4>ä¼ è¾“å•ä½</h4>
                            <p>æ®µ (Segment)</p>
                        </div>
                        <div class="info-card">
                            <h4>ä¸»è¦åŠŸèƒ½</h4>
                            <p>ç«¯åˆ°ç«¯ä¼ è¾“ã€æµæ§</p>
                        </div>
                        <div class="info-card">
                            <h4>åè®®ç¤ºä¾‹</h4>
                            <p>TCP, UDP</p>
                        </div>
                        <div class="info-card">
                            <h4>è€ƒè¯•é‡ç‚¹</h4>
                            <p>TCP/UDPåŒºåˆ«ã€ç«¯å£å·</p>
                        </div>
                    </div>
                    <button class="note-button" onclick="addLayerNote(4, 'ä¼ è¾“å±‚')">ğŸ“ æ·»åŠ ç¬”è®°</button>
                </div>
            </div>

            <div class="osi-layer layer-3">
                <div class="layer-header" onclick="toggleLayer(3)">
                    <span>ğŸ—ºï¸ ç¬¬3å±‚ï¼šç½‘ç»œå±‚ (Network Layer)</span>
                    <span>â–¼</span>
                </div>
                <div class="layer-content" id="layer-3-content">
                    <div class="layer-info">
                        <div class="info-card">
                            <h4>ä¼ è¾“å•ä½</h4>
                            <p>åŒ… (Packet)</p>
                        </div>
                        <div class="info-card">
                            <h4>ä¸»è¦åŠŸèƒ½</h4>
                            <p>è·¯ç”±å¯»å€ã€åŒ…è½¬å‘</p>
                        </div>
                        <div class="info-card">
                            <h4>å…³é”®è®¾å¤‡</h4>
                            <p>è·¯ç”±å™¨ (Router)</p>
                        </div>
                        <div class="info-card">
                            <h4>è€ƒè¯•é‡ç‚¹</h4>
                            <p>IPåœ°å€ã€è·¯ç”±ç®—æ³•</p>
                        </div>
                    </div>
                    <button class="note-button" onclick="addLayerNote(3, 'ç½‘ç»œå±‚')">ğŸ“ æ·»åŠ ç¬”è®°</button>
                </div>
            </div>

            <div class="osi-layer layer-2">
                <div class="layer-header" onclick="toggleLayer(2)">
                    <span>ğŸ”— ç¬¬2å±‚ï¼šæ•°æ®é“¾è·¯å±‚ (Data Link Layer)</span>
                    <span>â–¼</span>
                </div>
                <div class="layer-content" id="layer-2-content">
                    <div class="layer-info">
                        <div class="info-card">
                            <h4>ä¼ è¾“å•ä½</h4>
                            <p>å¸§ (Frame)</p>
                        </div>
                        <div class="info-card">
                            <h4>ä¸»è¦åŠŸèƒ½</h4>
                            <p>å¸§ä¼ è¾“ã€é”™è¯¯æ£€æµ‹</p>
                        </div>
                        <div class="info-card">
                            <h4>å…³é”®è®¾å¤‡</h4>
                            <p>äº¤æ¢æœº (Switch)</p>
                        </div>
                        <div class="info-card">
                            <h4>è€ƒè¯•é‡ç‚¹</h4>
                            <p>MACåœ°å€ã€ä»¥å¤ªç½‘</p>
                        </div>
                    </div>
                    <button class="note-button" onclick="addLayerNote(2, 'æ•°æ®é“¾è·¯å±‚')">ğŸ“ æ·»åŠ ç¬”è®°</button>
                </div>
            </div>

            <div class="osi-layer layer-1">
                <div class="layer-header" onclick="toggleLayer(1)">
                    <span>âš¡ ç¬¬1å±‚ï¼šç‰©ç†å±‚ (Physical Layer)</span>
                    <span>â–¼</span>
                </div>
                <div class="layer-content" id="layer-1-content">
                    <div class="layer-info">
                        <div class="info-card">
                            <h4>ä¼ è¾“å•ä½</h4>
                            <p>æ¯”ç‰¹æµ (Bit Stream)</p>
                        </div>
                        <div class="info-card">
                            <h4>ä¸»è¦åŠŸèƒ½</h4>
                            <p>ä¿¡å·ä¼ è¾“ã€æ¥å£å®šä¹‰</p>
                        </div>
                        <div class="info-card">
                            <h4>å…³é”®è®¾å¤‡</h4>
                            <p>é›†çº¿å™¨ (Hub)</p>
                        </div>
                        <div class="info-card">
                            <h4>è€ƒè¯•é‡ç‚¹</h4>
                            <p>ä¼ è¾“ä»‹è´¨ã€ä¿¡å·ç¼–ç </p>
                        </div>
                    </div>
                    <button class="note-button" onclick="addLayerNote(1, 'ç‰©ç†å±‚')">ğŸ“ æ·»åŠ ç¬”è®°</button>
                </div>
            </div>

            <div class="charts-section">
                <h2>ğŸ“Š æ•°æ®å¯è§†åŒ–åˆ†æ</h2>
                <div class="chart-grid">
                    <div class="chart-card">
                        <h3>å„å±‚å¤æ‚åº¦åˆ†æ</h3>
                        <img src="https://mdn.alipayobjects.com/one_clip/afts/img/1XyrT7yrm1kAAAAAQ6AAAAgAoEACAQFr/original" alt="å¤æ‚åº¦åˆ†æ">
                        <p>ç¡¬ä»¶å±‚å¤æ‚åº¦é€’å¢ï¼Œè½¯ä»¶å±‚ä¼ è¾“å±‚è¾¾åˆ°å³°å€¼</p>
                    </div>
                    <div class="chart-card">
                        <h3>è®¾å¤‡èƒ½åŠ›å¯¹æ¯”</h3>
                        <img src="https://mdn.alipayobjects.com/one_clip/afts/img/Mo5PQoEmGywAAAAARtAAAAgAoEACAQFr/original" alt="è®¾å¤‡èƒ½åŠ›">
                        <p>è·¯ç”±å™¨åŠŸèƒ½æœ€å…¨é¢ï¼Œäº¤æ¢æœºä¸“æ³¨åœ°å€å­¦ä¹ </p>
                    </div>
                    <div class="chart-card">
                        <h3>è€ƒç‚¹æƒé‡åˆ†å¸ƒ</h3>
                        <img src="https://mdn.alipayobjects.com/one_clip/afts/img/nHnHRIagcDAAAAAARdAAAAgAoEACAQFr/original" alt="è€ƒç‚¹åˆ†å¸ƒ">
                        <p>è®¾å¤‡åˆ†å±‚å¯¹åº”å 35%ï¼Œæ˜¯å¤‡è€ƒé‡ç‚¹</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="notes-panel">
            <div class="notes-header">
                <h2>ğŸ“ æˆ‘çš„ç¬”è®°</h2>
                <div class="notes-controls">
                    <button class="control-btn save-btn" onclick="saveNotes()">ğŸ’¾ ä¿å­˜</button>
                    <button class="control-btn export-btn" onclick="exportNotes()">ğŸ“¤ å¯¼å‡º</button>
                    <button class="control-btn clear-btn" onclick="clearNotes()">ğŸ—‘ï¸ æ¸…ç©º</button>
                </div>
            </div>

            <div class="quick-notes">
                <h4>ğŸ’¡ å¿«é€Ÿç¬”è®°æ¨¡æ¿</h4>
                <div class="quick-note-item" onclick="insertTemplate('é‡ç‚¹')">â­ é‡ç‚¹æ ‡è®°</div>
                <div class="quick-note-item" onclick="insertTemplate('ç–‘é—®')">â“ ç–‘é—®è®°å½•</div>
                <div class="quick-note-item" onclick="insertTemplate('æ€»ç»“')">ğŸ“‹ çŸ¥è¯†æ€»ç»“</div>
                <div class="quick-note-item" onclick="insertTemplate('è€ƒç‚¹')">ğŸ¯ è€ƒè¯•è¦ç‚¹</div>
            </div>

            <div class="note-tabs">
                <div class="note-tab active" onclick="switchTab('general')">ğŸ“ é€šç”¨ç¬”è®°</div>
                <div class="note-tab" onclick="switchTab('exam')">ğŸ¯ è€ƒè¯•é‡ç‚¹</div>
                <div class="note-tab" onclick="switchTab('review')">ğŸ“š å¤ä¹ è®¡åˆ’</div>
            </div>

            <div class="notes-area">
                <div class="note-content active" id="general-notes">
                    <textarea class="note-editor" id="general-editor" placeholder="åœ¨è¿™é‡Œè®°å½•ä½ çš„å­¦ä¹ ç¬”è®°...

ğŸ“ ç¬”è®°å»ºè®®ï¼š
â€¢ è®°å½•æ¯å±‚çš„æ ¸å¿ƒæ¦‚å¿µ
â€¢ æ ‡æ³¨é‡è¦çš„è®¾å¤‡å’Œåè®®
â€¢ æ€»ç»“è€ƒè¯•å¸¸è€ƒçŸ¥è¯†ç‚¹
â€¢ è®°å½•è‡ªå·±çš„ç†è§£å’Œç–‘é—®

ğŸ’¡ ä½¿ç”¨æŠ€å·§ï¼š
â€¢ ä½¿ç”¨ Ctrl+S å¿«é€Ÿä¿å­˜
â€¢ ç‚¹å‡»å·¦ä¾§å†…å®¹å¯å¿«é€Ÿæ·»åŠ ç¬”è®°
â€¢ ä½¿ç”¨æ¨¡æ¿å¿«é€Ÿæ ¼å¼åŒ–å†…å®¹"></textarea>
                    <div class="note-stats">
                        <span id="general-chars">å­—ç¬¦æ•°: 0</span>
                        <span id="general-words">å•è¯æ•°: 0</span>
                        <span id="general-time">æœ€åä¿å­˜: æœªä¿å­˜</span>
                    </div>
                </div>

                <div class="note-content" id="exam-notes">
                    <textarea class="note-editor" id="exam-editor" placeholder="è€ƒè¯•é‡ç‚¹ç¬”è®°...

ğŸ¯ è½¯è€ƒé‡ç‚¹ï¼š
1. è®¾å¤‡åˆ†å±‚å¯¹åº”å…³ç³» (35%)
2. ä¼ è¾“å•ä½åç§° (25%)
3. å†²çªåŸŸå’Œå¹¿æ’­åŸŸ (20%)
4. åœ°å€ç±»å‹åŒºåˆ† (15%)
5. åè®®åŠŸèƒ½ç‰¹ç‚¹ (5%)

ğŸ“‹ è®°å¿†å£è¯€ï¼š
â€¢ ç‰©æ•°ç½‘ä¼ ä¼šè¡¨åº”
â€¢ æ¯”ç‰¹å¸§åŒ…æ®µæ•°æ®æ•°æ®æ•°æ®
â€¢ é›†çº¿å™¨-äº¤æ¢æœº-è·¯ç”±å™¨"></textarea>
                    <div class="note-stats">
                        <span id="exam-chars">å­—ç¬¦æ•°: 0</span>
                        <span id="exam-words">å•è¯æ•°: 0</span>
                        <span id="exam-time">æœ€åä¿å­˜: æœªä¿å­˜</span>
                    </div>
                </div>

                <div class="note-content" id="review-notes">
                    <textarea class="note-editor" id="review-editor" placeholder="å¤ä¹ è®¡åˆ’...

ğŸ“… å­¦ä¹ è®¡åˆ’ï¼š
ç¬¬1å‘¨ï¼šåŸºç¡€æ¦‚å¿µç†è§£
ç¬¬2å‘¨ï¼šè®¾å¤‡åŠŸèƒ½æŒæ¡
ç¬¬3å‘¨ï¼šåè®®æ·±å…¥å­¦ä¹ 
ç¬¬4å‘¨ï¼šç»¼åˆç»ƒä¹ 

âœ… å¤ä¹ æ£€æŸ¥æ¸…å•ï¼š
â–¡ ä¸ƒå±‚æ¨¡å‹åŠŸèƒ½
â–¡ è®¾å¤‡åˆ†å±‚å¯¹åº”
â–¡ ä¼ è¾“å•ä½åŒºåˆ«
â–¡ åŸŸæ¦‚å¿µç†è§£
â–¡ å¸¸ç”¨åè®®æŒæ¡"></textarea>
                    <div class="note-stats">
                        <span id="review-chars">å­—ç¬¦æ•°: 0</span>
                        <span id="review-words">å•è¯æ•°: 0</span>
                        <span id="review-time">æœ€åä¿å­˜: æœªä¿å­˜</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ç¬”è®°æ•°æ®å­˜å‚¨
        let notesData = {
            general: '',
            exam: '',
            review: ''
        };

        // å½“å‰æ´»è·ƒçš„æ ‡ç­¾é¡µ
        let currentTab = 'general';

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.addEventListener('load', function() {
            loadNotes();
            updateStats();

            // ä¸ºæ‰€æœ‰ç¼–è¾‘å™¨æ·»åŠ äº‹ä»¶ç›‘å¬
            document.querySelectorAll('.note-editor').forEach(editor => {
                editor.addEventListener('input', function() {
                    updateStats();
                    autoSave();
                });

                editor.addEventListener('keydown', function(e) {
                    if (e.ctrlKey && e.key === 's') {
                        e.preventDefault();
                        saveNotes();
                    }
                });
            });
        });

        // åˆ‡æ¢å±‚å†…å®¹æ˜¾ç¤º
        function toggleLayer(layerNum) {
            const content = document.getElementById(`layer-${layerNum}-content`);
            const header = content.previousElementSibling;
            const arrow = header.querySelector('span:last-child');

            if (content.classList.contains('active')) {
                content.classList.remove('active');
                arrow.textContent = 'â–¼';
            } else {
                content.classList.add('active');
                arrow.textContent = 'â–²';
            }
        }

        // åˆ‡æ¢ç¬”è®°æ ‡ç­¾é¡µ
        function switchTab(tabName) {
            // ä¿å­˜å½“å‰æ ‡ç­¾é¡µå†…å®¹
            saveCurrentTabContent();

            // æ›´æ–°æ ‡ç­¾é¡µçŠ¶æ€
            document.querySelectorAll('.note-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[onclick="switchTab('${tabName}')"]`).classList.add('active');

            // æ›´æ–°å†…å®¹åŒºåŸŸ
            document.querySelectorAll('.note-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${tabName}-notes`).classList.add('active');

            // åŠ è½½å¯¹åº”å†…å®¹
            currentTab = tabName;
            document.getElementById(`${tabName}-editor`).value = notesData[tabName];
            updateStats();
        }

        // ä¿å­˜å½“å‰æ ‡ç­¾é¡µå†…å®¹
        function saveCurrentTabContent() {
            const editor = document.getElementById(`${currentTab}-editor`);
            notesData[currentTab] = editor.value;
        }

        // æ·»åŠ å±‚çº§ç¬”è®°
        function addLayerNote(layerNum, layerName) {
            const template = `\n\nğŸ“Œ ${layerName} ç¬”è®° (${new Date().toLocaleString()})\n` +
                           `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n` +
                           `ğŸ” æ ¸å¿ƒæ¦‚å¿µï¼š\n\n` +
                           `ğŸ’¡ é‡è¦çŸ¥è¯†ç‚¹ï¼š\n\n` +
                           `â“ ç–‘é—®è®°å½•ï¼š\n\n` +
                           `ğŸ¯ è€ƒè¯•è¦ç‚¹ï¼š\n\n`;

            const editor = document.getElementById(`${currentTab}-editor`);
            editor.value += template;
            editor.focus();
            editor.scrollTop = editor.scrollHeight;
            updateStats();
        }

        // æ’å…¥å¿«é€Ÿæ¨¡æ¿
        function insertTemplate(type) {
            const templates = {
                'é‡ç‚¹': `â­ é‡ç‚¹ï¼š\n`,
                'ç–‘é—®': `â“ ç–‘é—®ï¼š\n`,
                'æ€»ç»“': `ğŸ“‹ æ€»ç»“ï¼š\n`,
                'è€ƒç‚¹': `ğŸ¯ è€ƒç‚¹ï¼š\n`
            };

            const editor = document.getElementById(`${currentTab}-editor`);
            const template = templates[type] || '';
            editor.value += `\n${template}`;
            editor.focus();
            editor.scrollTop = editor.scrollHeight;
            updateStats();
        }

        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStats() {
            const editor = document.getElementById(`${currentTab}-editor`);
            const content = editor.value;
            const chars = content.length;
            const words = content.trim() ? content.trim().split(/\s+/).length : 0;

            document.getElementById(`${currentTab}-chars`).textContent = `å­—ç¬¦æ•°: ${chars}`;
            document.getElementById(`${currentTab}-words`).textContent = `å•è¯æ•°: ${words}`;
        }

        // ä¿å­˜ç¬”è®°
        function saveNotes() {
            saveCurrentTabContent();
            localStorage.setItem('osiNotes', JSON.stringify(notesData));

            const now = new Date().toLocaleString();
            document.querySelectorAll('[id$="-time"]').forEach(timeSpan => {
                timeSpan.textContent = `æœ€åä¿å­˜: ${now}`;
            });

            // æ˜¾ç¤ºä¿å­˜æˆåŠŸæç¤º
            showNotification('ğŸ’¾ ç¬”è®°å·²ä¿å­˜', 'success');
        }

        // åŠ è½½ç¬”è®°
        function loadNotes() {
            const saved = localStorage.getItem('osiNotes');
            if (saved) {
                notesData = JSON.parse(saved);
                document.getElementById('general-editor').value = notesData.general || '';
                document.getElementById('exam-editor').value = notesData.exam || '';
                document.getElementById('review-editor').value = notesData.review || '';
            }
        }

        // è‡ªåŠ¨ä¿å­˜
        let autoSaveTimer;
        function autoSave() {
            clearTimeout(autoSaveTimer);
            autoSaveTimer = setTimeout(() => {
                saveNotes();
            }, 5000); // 5ç§’åè‡ªåŠ¨ä¿å­˜
        }

        // å¯¼å‡ºç¬”è®°
        function exportNotes() {
            saveCurrentTabContent();

            const exportContent = `# OSIä¸ƒå±‚æ¨¡å‹å­¦ä¹ ç¬”è®°\n\n` +
                                `## ğŸ“ é€šç”¨ç¬”è®°\n${notesData.general}\n\n` +
                                `## ğŸ¯ è€ƒè¯•é‡ç‚¹\n${notesData.exam}\n\n` +
                                `## ğŸ“š å¤ä¹ è®¡åˆ’\n${notesData.review}\n\n` +
                                `---\nå¯¼å‡ºæ—¶é—´: ${new Date().toLocaleString()}`;

            const blob = new Blob([exportContent], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `OSIä¸ƒå±‚æ¨¡å‹ç¬”è®°_${new Date().toISOString().split('T')[0]}.md`;
            a.click();
            URL.revokeObjectURL(url);

            showNotification('ğŸ“¤ ç¬”è®°å·²å¯¼å‡º', 'success');
        }

        // æ¸…ç©ºç¬”è®°
        function clearNotes() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰ç¬”è®°å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼')) {
                notesData = { general: '', exam: '', review: '' };
                document.querySelectorAll('.note-editor').forEach(editor => {
                    editor.value = '';
                });
                localStorage.removeItem('osiNotes');
                updateStats();
                showNotification('ğŸ—‘ï¸ ç¬”è®°å·²æ¸…ç©º', 'warning');
            }
        }

        // æµ®åŠ¨å·¥å…·åŠŸèƒ½
        function addBookmark() {
            const editor = document.getElementById(`${currentTab}-editor`);
            const bookmark = `\nğŸ“Œ ä¹¦ç­¾ (${new Date().toLocaleTimeString()})\n`;
            editor.value += bookmark;
            updateStats();
            showNotification('ğŸ“Œ ä¹¦ç­¾å·²æ·»åŠ ', 'info');
        }

        function highlightText() {
            const editor = document.getElementById(`${currentTab}-editor`);
            const start = editor.selectionStart;
            const end = editor.selectionEnd;
            const selectedText = editor.value.substring(start, end);

            if (selectedText) {
                const highlightedText = `ğŸ–ï¸ ${selectedText} ğŸ–ï¸`;
                editor.value = editor.value.substring(0, start) + highlightedText + editor.value.substring(end);
                updateStats();
                showNotification('ğŸ–ï¸ æ–‡æœ¬å·²é«˜äº®', 'info');
            } else {
                showNotification('è¯·å…ˆé€‰æ‹©è¦é«˜äº®çš„æ–‡æœ¬', 'warning');
            }
        }

        function searchNotes() {
            const keyword = prompt('è¯·è¾“å…¥æœç´¢å…³é”®è¯ï¼š');
            if (keyword) {
                const editor = document.getElementById(`${currentTab}-editor`);
                const content = editor.value;
                const regex = new RegExp(keyword, 'gi');
                const matches = content.match(regex);

                if (matches) {
                    showNotification(`ğŸ” æ‰¾åˆ° ${matches.length} ä¸ªåŒ¹é…é¡¹`, 'success');
                    // é«˜äº®ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹
                    const firstMatch = content.search(regex);
                    if (firstMatch !== -1) {
                        editor.focus();
                        editor.setSelectionRange(firstMatch, firstMatch + keyword.length);
                    }
                } else {
                    showNotification('ğŸ” æœªæ‰¾åˆ°åŒ¹é…é¡¹', 'warning');
                }
            }
        }

        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 8px;
                color: white;
                font-weight: bold;
                z-index: 10000;
                animation: slideIn 0.3s ease;
            `;

            const colors = {
                success: '#28a745',
                warning: '#ffc107',
                error: '#dc3545',
                info: '#17a2b8'
            };

            notification.style.background = colors[type] || colors.info;
            notification.textContent = message;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // æ·»åŠ CSSåŠ¨ç”»
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
